Vagrant.configure("2") do |config|
    config.vm.box = "ubuntu/bionic64"

    config.vm.network "forwarded_port", guest:80, host:8080 #guest=máquina virtual, #host=máquina física
    #config.vm.network "private_network", ip: "192.168.59.2" #desabilitando pois há bug no virtualbox/vagrant/mac os
    config.vm.network "public_network", bridge: "en1: Wi-Fi (AirPort)", ip: "192.168.1.226"

    # workaround para funcionar no mac monterrey enquanto não atualiza virtualbox
    config.vm.provider "virtualbox" do |v|
      v.gui = true
    end

    # provisionamento
    # instala mysql, inclui usuário, atualiza configuração e reinicia serviço
    config.vm.provision "shell", inline: "echo **** iniciando provisionamento"
    $script_mysql = <<-SCRIPT
        apt-get update && \
        apt-get install -y mysql-server-5.7 && \
        mysql -e "create user 'phpuser'@'%' identified by 'pass';"
    SCRIPT
    config.vm.provision "shell", inline: $script_mysql
    config.vm.provision "shell", inline: "cat /compartilhado/conf/mysqld.cnf > /etc/mysql/mysql.conf.d/mysqld.cnf"
    config.vm.provision "shell", inline: "service mysql restart"
    config.vm.provision "shell", inline: "echo **** terminando provisionamento"


    config.vm.synced_folder "./conf", "/compartilhado/conf"
end